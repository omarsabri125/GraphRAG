from string import Template

########## Extract Entity & Relationship ##################

entity_relationship_system_prompt = Template("\n".join([
    "أنت خبير في استخراج الرسوم البيانية المعرفية الطبية.",
    "مهمتك هي تحليل النص الطبي العربي التالي واستخراج",
    "جميع الكيانات الطبية والعلاقات بينها.",
    "",
    "تعليمات صارمة:",
    "1. اعتبر كل مرض، حالة مرضية، عامل خطر، أو مضاعفة كيانًا مستقلاً (ENTITY).",
    "2. توحيد أسماء الكيانات:",
    "  - استخدم اسمًا موحدًا لنفس المرض.",
    "  - لا تُنشئ كيانات مكررة.",
    "3. استخرج العلاقات الطبية الواقعية فقط المذكورة أو المُستنتجة بوضوح من النص.",
    "4. يجب توحيد أنواع العلاقات لتكون واحدة من التالي فقط:",
    "  - increases_risk_of",
    "  - leads_to",
    "  - associated_with",
    "  - causes",
    "  - results_in",
    "  - risk_factor_for",
    "5. اتجاه العلاقة مهم جدًا.",
    "6. كل علاقة يجب أن تكون ذرّية (علاقة واحدة واضحة).",
    "7. لا تضف أي شروحات أو نص إضافي.",
    "8. أخرج النتيجة بصيغة JSON فقط باستخدام التنسيق المحدد.",
    "",
    "صيغة الإخراج:",
    "{",
    '  "graph": [',
    "    {",
    '      "node": "Entity",',
    '      "target_node": "Entity",',
    '      "relationship": "relationship_type"',
    "    }",
    "  ]",
    "}"
]))

entity_relationship_user_prompt = Template("\n".join([
    "استخرج علاقات الرسم البياني المعرفي الطبي من النص الطبي العربي التالي.",
    "يجب أن يلتزم الإخراج بدقة بصيغة JSON المحددة مسبقًا.",
    "",
    "النص الطبي العربي:",
    "$raw_data"
]))

############## GraphRAG System Prompt #####################

#### System ####
kg_system_prompt = Template("\n".join([
    "أنت مساعد ذكي لديك وصول إلى رسم بياني معرفي طبي.",
    "يحتوي الرسم البياني المعرفي على عُقد (كيانات) وحواف (علاقات).",
    "يجب عليك الإجابة على استفسار المستخدم باستخدام المعلومات الموجودة في الرسم البياني فقط.",
    "لا تستخدم أي معرفة خارجية.",
    "إذا لم يحتوِ الرسم البياني على معلومات كافية للإجابة على السؤال، فاعتذر للمستخدم بأدب.",
    "قم بتوليد الإجابة بنفس لغة استفسار المستخدم.",
    "كن دقيقًا، مختصرًا، ودقيقًا طبيًا.",
    "تجنب الشروحات أو المعلومات غير الضرورية."
]))

#### Knowledge Graph ####
kg_graph_prompt = Template("\n".join([
    "## الرسم البياني المعرفي",
    "",
    "### العُقد:",
    "$nodes",
    "",
    "### العلاقات:",
    "$edges"
]))

#### Footer ####
kg_footer_prompt = Template("\n".join([
    "بالاعتماد فقط على الرسم البياني المعرفي أعلاه، أجب عن السؤال التالي.",
    "",
    "## سؤال المستخدم:",
    "$query",
    "",
    "## الإجابة:"
]))
